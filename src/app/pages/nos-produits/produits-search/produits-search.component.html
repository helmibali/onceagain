<div class="n">
    <app-navbar></app-navbar>
  </div>
  <div style="background-color: #e9ebedaf">
      <div class="all" style="display: flex">
  
          <div class="filter">
          <div class="mt-5" style="  position: sticky; top: 85px;width: 95%;border:2px rgb(135, 135, 135) solid;border-radius: 1rem;background-color: #e9ebedaf">
              <div class="mt-3" style="width:50%;margin: auto;">
                  <h4>Filtre avancé</h4>
              </div>
              <div></div>
              <div style="width: 80%;margin: auto;">
                  <input
                    class="form-control form-control-lg recherche text-center"
                  
                    type="search"
                    placeholder="Rechercher une piece..."
                    aria-label="Search"
                    [(ngModel)]="term"
                  />
                </div>
  
                <div>
                  <div class="mt-2 mb-2" style="width: 100%">
                      <div style="display: flex;width: 100%;">
                        <div style="width:45% ; margin: auto;">
                          <select
                            class="form-control mb-1 inputFiltre text-center"
                       
                            [(ngModel)]="selectedFamille.id"
                            (change)="onSelectByFamille($event)"
                          >
                            <option value="0"><u>Catégorie</u></option>
                            <option *ngFor="let f of familles" [value]="f.id">
                              {{ f.libelle }}
                            </option>
                          </select>
                        </div>
                        <div style="width:45% ;margin: auto;">
                          <select
                            class="form-control mb-1 inputFiltre text-center"
                            style="/* border-radius: 10px; */"
                            [(ngModel)]="selectedCategorie.id"
                            (change)="onSelectByCat($event)"
                          >
                            <option value="0">Sous-catégorie</option>
                            <option
                              *ngFor="let c of categoriesByFamille"
                              [value]="c.id"
                            >
                              {{ c.nomCategorie }}
                            </option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="mt-2 mb-2" style="width: 100%">
                      <div style="display: flex;">
                        <div style="width: 45%;margin: auto;">
                          <select
                            class="form-control mb-1 inputFiltre text-center"
                            style="/* border-radius: 10px; */"
                            [(ngModel)]="selectedMarque.id"
                            (change)="onSelect($event)"
                          >
                            <option value="0">Marque</option>
                            <option *ngFor="let m of marques" [value]="m.id">
                              {{ m.libelleMarque }}
                            </option>
                          </select>
                        </div>
                        <div style="width: 45%;margin: auto;">
                          <select
                            class="form-control mb-1 inputFiltre text-center"
                            style="/* border-radius: 10px; */"
                            [(ngModel)]="selectedModele.id"
                            (change)="onSelectByMod($event)"
                          >
                            <option value="0">Modele</option>
                            <option
                              *ngFor="let mod of modelesByMarque"
                              [value]="mod.id"
                            >
                              {{ mod.libelleModele }}
                            </option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="mt-2 mb-2" style="width: 100%">
                      <!-- <div style="display: flex;"> -->
                        <!-- <div style="width:45% ;margin:auto;"> 
                          <select class="form-control mb-1 inputFiltre text-center">
                            <option value="">Carburant</option>
                            <option>Essence</option>
                            <option>Diesel</option>
                            <option>GPL</option>
                          </select>
                        </div> -->
                        <!-- <div style="width:45% ;margin:auto;">
                          <select class="form-control mb-1 inputFiltre text-center">
                            <option value="">Année</option>
                            <option value="1990">1990</option>
                            <option value="1991">1991</option>
                            <option value="1992">1992</option>
                            <option value="1993">1993</option>
                            <option value="1994">1994</option>
                            <option value="1995">1995</option>
                            <option value="1996">1996</option>
                            <option value="1997">1997</option>
                            <option value="1998">1998</option>
                            <option value="1999">1999</option>
                            <option value="2000">2000</option>
                            <option value="2001">2001</option>
                            <option value="2002">2002</option>
                            <option value="2003">2003</option>
                            <option value="2004">2004</option>
                            <option value="2005">2005</option>
                            <option value="2006">2006</option>
                            <option value="2007">2007</option>
                            <option value="2008">2008</option>
                            <option value="2009">2009</option>
                            <option value="2010">2010</option>
                            <option value="2011">2011</option>
                            <option value="2012">2012</option>
                            <option value="2013">2013</option>
                            <option value="2014">2014</option>
                            <option value="2015">2015</option>
                            <option value="2016">2016</option>
                            <option value="2017">2017</option>
                            <option value="2018">2018</option>
                            <option value="2019">2019</option>
                            <option value="2020">2020</option>
                            <option value="2021">2021</option>
                            <option value="2022">2022</option>
                          </select>
                        </div> -->
                      <!-- </div> -->
                    </div>
  
                    <div class="mt-2 mb-2" style="width: 100%">
                      <div style="display: flex;">
                        <div style="width:45%;margin:auto;">
                          <select
                            class="form-control mb-1 inputFiltre text-center"
                            style="/* border-radius: 10px; */"
                            [(ngModel)]="selectedGouvernorat.id"
                            (change)="onSelectGov($event)"
                          >
                            <option style="border-radius: 25px" value="0">
                              Gouvernourat
                            </option>
                            <option
                              style="border-radius: 25px"
                              *ngFor="let g of gouvernorats"
                              [value]="g.id"
                            >
                              {{ g.libelle }}
                            </option>
                          </select>
                        </div>
                        <div style="width:45%;margin:auto;">
                          <select
                            class="form-control mb-1 inputFiltre text-center"
                            style="/* border-radius: 10px; */"
                            [(ngModel)]="selectedDelegation.id"
                            (change)="onSelectByDelegation($event)"
                          >
                            <option value="0">Délégation</option>
                            <option *ngFor="let d of delegationsByGov" [value]="d.id">
                              {{ d.libelle }}
                            </option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="submit mt-3 mb-5" style="display: flex;width: 100%">
                      <button
                        class="btn btn-danger btn-lg"
                        style="width: 70%;margin: auto;"
                        (click)="filter2()"
                      >
                        Filtrer <i class="fa fa-filter"></i>
                      </button>
                    </div>
  
  
                </div>
          </div>
  
  
  </div>
  
  
  
  
          <div class="ml-3 mt-1" style="width:75% ;">
            
      
            
<div style="display:flex;">
    <div class="btn-group"  role="group" aria-label="Button group with nested dropdown">
      <button *ngIf="!dies && !gaz && !elec"type="button"class="btn btn-secondary"(click)="essence()">{{essenceButton}} </button> 
       <button *ngIf="dies || gaz || elec"type="button" class="btn btn-secondary"disabled>{{essenceButton}} </button>

      <button *ngIf="!ess && !gaz && !elec"type="button"  class="btn btn-secondary" (click)="diesel()">{{dieselButton}}</button>
       <button *ngIf="ess || gaz || elec"type="button"class="btn btn-secondary" disabled>{{dieselButton}}</button>

      <button *ngIf="!ess && !dies && !gaz" type="button" class="btn btn-secondary" (click)="electrique()">{{electriqueButton}}</button>
      <button *ngIf="ess || dies || gaz" type="button" class="btn btn-secondary" disabled>{{electriqueButton}}</button>
      
      <button *ngIf="!ess && !dies && !elec" type="button" class="btn btn-secondary" (click)="gpl()">{{gplButton}}</button>
      <button *ngIf="ess || dies || elec" type="button" class="btn btn-secondary" disabled>{{gplButton}}</button>
      <div  class="btn-group" role="group">
        <button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Année
        </button>
        <div   class="dropdown-menu" aria-labelledby="btnGroupDrop1">
          <ul style="list-style-type:none;"  *ngFor="let p of anneeSearch">
           <a (click)="anneeClick(p.annee)"> <li  *ngIf="p.annee > 0">{{p.annee}}</li></a>
          </ul>
          
          
        </div>
      </div>
    </div>
  </div>
  <div style="display: flex" >
    <p>({{ produitsSearch?.length }})</p>
    <p style="color: rgb(78, 74, 74); font-weight: bold; font-size: large">
      Annonces sur la casse Tunisie
    </p>
  </div>

  <app-produits-filtred
  [produits]="produitsSearch"
  [term]="term"
></app-produits-filtred>
  
  <!-- <div  class="container-fluid d-flex justify-content-center">
      <div class="row mb-5">
        <div *ngFor="let p of produitsSearch|filter:term  " class="col-sm-3">
          <div class="card mt-3">
  
  
            
  
  
        <img src="{{'http://localhost:8081/api/imgp/'+p.idProduit}}" class="card-img-top" width="100%" style="height:170px ;">
        <div class="card-body pt-0 px-0">
          <div class="dropdown" style="position:absolute ;left: 83%; top: 1%;">
            <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              
            </button>
            <div class="dropdown-menu" style="border-radius:10px;background-color:#e9ebeddf" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" (click)="supprimerProduit(p)">Supprimer</a>
              <a class="dropdown-item" href="#">Modifier</a>
              <a class="dropdown-item" href="#">Désactiver</a>
            </div>
          </div>
          <div class="d-flex flex-row justify-content-between mb-0 px-3">
            <h6 class="text-muted mt-1">{{  p.nomProduit }}</h6>
            <h6>{{p.prixProduit}} TND</h6>
          </div>
          <hr class="mt-2 mx-3">
          <div class="d-flex flex-row justify-content-between px-3 pb-4">
            <div class="d-flex flex-column"><span class="text-muted">{{p.categorie.famille.libelle}}</span></div>
            <div class="d-flex flex-column"><h5 class="mb-0">{{p.categorie.nomCategorie}}</h5></div>
          </div>
          <div class="d-flex flex-row justify-content-between px-3 pb-4">
              <div class="d-flex flex-column"><span class="text-muted"><i class="fa fa-map-marker" aria-hidden="true"></i> {{p.delegation.libelle}}</span><small class="text-muted">{{p.delegation.gouvernorat.libelle}}</small></div>
              <div class="d-flex flex-column"><span class="text-muted"> <i class="fa fa-clock-o" aria-hidden="true"></i>
                  {{p.dateCreation | date:'HH:mm'}}  </span><small class="text-muted text-right">{{p.dateCreation | date:'dd-MM-yyyy'}}</small></div>
            </div>
          <div class="d-flex flex-row justify-content-between p-3 mid" style="display:flex ;" >
            <div class="d-flex flex-column" *ngFor="let m of p.modeles">
              <small class="text-muted mb-1">Marque</small>
              <div class="d-flex flex-row">
              <img src="{{'http://localhost:8081/api/ImgMarque/'+m.marque.id}}" width="35px" height="25px">
              <div class="d-flex flex-column ml-1">
                  <small class="ghj">{{m.libelleModele}} </small></div></div></div>
          </div>
      
          <div class="mx-3 mt-3 mb-2"><button type="button" class="btn btn-danger btn-block" [routerLink]="['/produit',produit.idProduit]"><small>découvrir</small></button></div>
         
        </div>
      </div>
        </div>
        
  
      
      </div>
    </div> -->
  
              
          </div>
        </div>
      </div>
  
  
  <app-footer></app-footer>
